###############################################################
#           Bookrequestarr Development Environment           #
#                    Docker Compose Setup                     #
###############################################################

# This is a template for the development environment.
# Copy this file to .env and fill in the required values.
# The dev-setup.sh script will do this automatically.

###############################################################
# Database Configuration
###############################################################

# SQLite database file path (inside container)
DATABASE_URL=/app/data/bookrequestarr.db

###############################################################
# OIDC Authentication (Authelia)
###############################################################

# Authelia OIDC configuration (using container networking)
OIDC_ISSUER=http://authelia:9091
OIDC_CLIENT_ID=bookrequestarr
OIDC_CLIENT_SECRET=BOOKREQUESTARR_CLIENT_SECRET_PLACEHOLDER
OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# Optional: Custom group names (defaults shown)
# OIDC_ADMIN_GROUP=bookrequestarr_admin
# OIDC_USER_GROUP=bookrequestarr

###############################################################
# Security
###############################################################

# JWT secret for session tokens (min 32 characters)
# Generate with: openssl rand -base64 48
JWT_SECRET=JWT_SECRET_PLACEHOLDER

###############################################################
# Application Settings
###############################################################

# Public application URL (for external access)
PUBLIC_APP_URL=http://localhost:3000

# Node environment
NODE_ENV=development

# Logging level (debug, info, warn, error)
LOG_LEVEL=debug

###############################################################
# Hardcover API (Book Metadata)
###############################################################

# REQUIRED: Get your API key from https://hardcover.app/settings/api
HARDCOVER_API_KEY=your_hardcover_api_key_here

# Optional: API endpoint (default shown)
# HARDCOVER_API_URL=https://api.hardcover.app/v1/graphql

# Optional: API cache TTL in days
# API_CACHE_TTL_DAYS=7

###############################################################
# Download Configuration
###############################################################

# Directory for downloaded books (inside container)
DOWNLOAD_DIRECTORY=/app/data/downloads

# Maximum downloads per day (rate limiting)
DOWNLOAD_DAILY_LIMIT=25

###############################################################
# Anna's Archive Integration (Required for Downloads)
###############################################################

# REQUIRED: Anna's Archive API key for automated downloads
# Without this, downloads will fail with HTTP 400 errors
# Get a FREE API key at: https://annas-archive.org/account
# ANNAS_ARCHIVE_API_KEY=your_annas_archive_api_key_here

# Optional: Custom Anna's Archive domain (defaults to .li, .pm, .in with automatic fallback)
# Only set this if you need to use a specific mirror
# ANNAS_ARCHIVE_DOMAIN=annas-archive.li

###############################################################
# Prowlarr Integration (Usenet Indexer Manager)
###############################################################

# Prowlarr URL (using container networking)
PROWLARR_URL=http://prowlarr:9696

# Prowlarr API key (get from Settings → General → Security)
# Leave empty initially, configure after Prowlarr setup
PROWLARR_API_KEY=

###############################################################
# SABnzbd Integration (Usenet Download Client)
###############################################################

# SABnzbd URL (using container networking)
SABNZBD_URL=http://sabnzbd:8080

# SABnzbd API key (get from Config → General → Security → API Key)
# Leave empty initially, configure after SABnzbd setup
SABNZBD_API_KEY=

# SABnzbd category for book downloads (must exist in SABnzbd)
SABNZBD_CATEGORY=books

###############################################################
# Download Source Priority
###############################################################

# Options: prowlarr_first, annas_archive_first, prowlarr_only, annas_archive_only
# prowlarr_first: Try Prowlarr/SABnzbd first, fallback to Anna's Archive
# annas_archive_first: Try Anna's Archive first, fallback to Prowlarr/SABnzbd
# prowlarr_only: Only use Prowlarr/SABnzbd (no Anna's Archive fallback)
# annas_archive_only: Only use Anna's Archive (no Prowlarr/SABnzbd)
DOWNLOAD_SOURCE_PRIORITY=prowlarr_first

# Minimum confidence score (0-100) required to auto-download from Prowlarr
# Lower = more permissive, Higher = stricter matching
MIN_CONFIDENCE_SCORE=50

###############################################################
# Calibre-Web Integration (Optional)
###############################################################

# Calibre-Web base URL for linking to library
# Example: https://calibre.example.com
# CALIBRE_BASE_URL=

###############################################################
# Notification Settings (Optional)
###############################################################

# Discord webhook URL for notifications
# DISCORD_WEBHOOK_URL=

# Telegram bot token and chat ID for notifications
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_CHAT_ID=

###############################################################
# Development Mode
###############################################################

# DISABLE_AUTH: Skip OIDC and auto-login as admin
# WARNING: NEVER use this in production!
# Set to 'false' to test full OIDC authentication flow
DISABLE_AUTH=false

###############################################################
# Notes
###############################################################

# 1. The dev-setup.sh script will automatically:
#    - Generate secure secrets for JWT_SECRET and OIDC_CLIENT_SECRET
#    - Create the dev-data/ directory structure
#    - Start all containers with docker compose
#
# 2. After first startup, configure Prowlarr and SABnzbd:
#    - Prowlarr: http://localhost:9696
#    - SABnzbd: http://localhost:8080
#    - Get API keys from their settings and update this file
#    - Restart Bookrequestarr: docker compose -f docker-compose.dev.yml restart bookrequestarr
#
# 3. Test users (when DISABLE_AUTH=false):
#    - Admin: username=admin, password=admin123
#    - User: username=user, password=user123
#
# 4. All data is stored in dev-data/ (gitignored)
#
# 5. Access URLs:
#    - Bookrequestarr: http://localhost:3000
#    - Authelia: http://localhost:9091
#    - Prowlarr: http://localhost:9696
#    - SABnzbd: http://localhost:8080
