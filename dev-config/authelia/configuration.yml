---
###############################################################
#                   Authelia Configuration                    #
#                  Development Environment                    #
###############################################################

# Server Configuration
server:
  host: 0.0.0.0
  port: 9091
  path: ''
  enable_pprof: false
  enable_expvars: false
  disable_healthcheck: false
  tls:
    key: ''
    certificate: ''

# Log Configuration
log:
  level: debug
  format: text
  file_path: ''
  keep_stdout: true

# Theme
theme: light

# JWT Secret for session tokens
jwt_secret: JWT_SECRET_PLACEHOLDER

# Default Redirection URL
default_redirection_url: http://localhost:3000

# TOTP Configuration
totp:
  disable: false
  issuer: authelia.com
  algorithm: sha1
  digits: 6
  period: 30
  skew: 1
  secret_size: 32

# Authentication Backend
authentication_backend:
  disable_reset_password: false
  refresh_interval: 5m
  file:
    path: /config/users_database.yml
    password:
      algorithm: argon2id
      iterations: 1
      key_length: 32
      salt_length: 16
      memory: 64
      parallelism: 8

# Access Control
access_control:
  default_policy: deny
  rules:
    # Allow all authenticated users to access Bookrequestarr
    - domain: localhost
      policy: one_factor
    - domain: '*.localhost'
      policy: one_factor

# Session Configuration
session:
  name: authelia_session
  domain: localhost
  same_site: lax
  secret: SESSION_SECRET_PLACEHOLDER
  expiration: 1h
  inactivity: 5m
  remember_me_duration: 1M

  # Redis Configuration for session storage
  redis:
    host: redis
    port: 6379
    username: ''
    password: ''
    database_index: 0
    maximum_active_connections: 8
    minimum_idle_connections: 0

# Regulation (brute force protection)
regulation:
  max_retries: 3
  find_time: 2m
  ban_time: 5m

# Storage (local SQLite for dev)
storage:
  encryption_key: ENCRYPTION_KEY_PLACEHOLDER
  local:
    path: /config/db.sqlite3

# Notifier (file-based for dev - no email)
notifier:
  disable_startup_check: true
  filesystem:
    filename: /config/notification.txt

# Identity Providers - OIDC
identity_providers:
  oidc:
    hmac_secret: OIDC_HMAC_SECRET_PLACEHOLDER
    issuer_private_key: |
      -----BEGIN RSA PRIVATE KEY-----
      ISSUER_PRIVATE_KEY_PLACEHOLDER
      -----END RSA PRIVATE KEY-----

    access_token_lifespan: 1h
    authorize_code_lifespan: 1m
    id_token_lifespan: 1h
    refresh_token_lifespan: 90m

    enable_client_debug_messages: true
    enforce_pkce: public_clients_only

    cors:
      endpoints:
        - authorization
        - token
        - revocation
        - introspection
      allowed_origins:
        - http://localhost:3000
      allowed_origins_from_client_redirect_uris: false

    clients:
      - id: bookrequestarr
        description: Bookrequestarr Development Client
        secret: BOOKREQUESTARR_CLIENT_SECRET_PLACEHOLDER
        public: false
        authorization_policy: one_factor

        redirect_uris:
          - http://localhost:3000/auth/callback

        scopes:
          - openid
          - profile
          - email
          - groups

        grant_types:
          - authorization_code
          - refresh_token

        response_types:
          - code

        response_modes:
          - form_post
          - query
          - fragment

        userinfo_signing_algorithm: none
